@using RakipBul.ViewModels.Captain;
@model CaptainDashboardViewModel
@{
    ViewData["Title"] = "Kaptan Paneli";
    // Eğer bir _CaptainLayout oluşturduysanız onu kullanın:
    // Layout = "_CaptainLayout";
    // Yoksa Admin layout'unu veya varsayılanı kullanabilirsiniz:
    Layout = "_CaptainLayout"; // Veya "_Layout"
}

<div class="min-h-screen bg-gray-900 text-gray-100">

    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <h1 class="text-2xl font-semibold text-yellow-500 mb-6">Takım Maçları</h1>

        <div class="flex flex-col sm:flex-row flex-wrap items-center justify-between gap-3 mb-6">
            <div class="flex flex-wrap justify-center sm:justify-start gap-3 mb-4 sm:mb-0">
                <a href="@Url.Action("TeamDetails")" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors text-sm sm:text-base whitespace-nowrap">
                    <i class="fas fa-shield-alt mr-1"></i> Takımım
                </a>
            </div>
        </div>

        @if (TempData["Success"] != null)
        {
            <div class="mb-4 p-4 bg-green-600 text-white rounded-lg">
                @TempData["Success"]
            </div>
        }
        @if (TempData["Error"] != null)
        {
            <div class="mb-4 p-4 bg-red-600 text-white rounded-lg">
                @TempData["Error"]
            </div>
        }

        @if (!Model.Matches.Any())
        {
            <p class="text-gray-400">Gösterilecek maç bulunmamaktadır.</p>
        }
        else
        {
            <div class="bg-gray-800 shadow sm:rounded-lg">               
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-700">
                        <thead class="bg-gray-700/50">
                            <tr>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                                    Rakip
                                </th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider whitespace-nowrap">
                                    Skor
                                </th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider whitespace-nowrap">
                                    Maç Tarihi
                                </th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                                    Lig/Sezon/Hafta
                                </th>
                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider whitespace-nowrap">
                                    İşlemler
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-gray-800 divide-y divide-gray-700">
                            @foreach (var match in Model.Matches)
                            {
                                <tr>
                                    <td class="px-4 py-4 text-sm font-medium text-white align-top">
                                        @match.OpponentName
                                        <span class="block text-xs text-gray-400">(@(match.IsCaptainHomeTeam ? "Ev Sahibi" : "Deplasman"))</span>
                                    </td>
                                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-300 align-top">
                                        @match.ScoreDisplay
                                    </td>
                                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-300 align-top">
                                        @match.MatchDate.ToString("dd.MM.yyyy HH:mm")
                                    </td>
                                    <td class="px-4 py-4 text-sm text-gray-300 align-top">
                                        @match.LeagueName / @match.SeasonName / Hafta @match.WeekNumber
                                    </td>
                                    <td class="px-4 py-4 whitespace-nowrap text-right text-sm font-medium align-top">
                                        @if (!match.IsPlayed)
                                        {
                                            <a href="@Url.Action("EditSquad", "Captain", new { matchId = match.MatchID })" class="text-indigo-400 hover:text-indigo-300 transition-colors duration-150">Kadro Düzenle</a>
                                        }
                                        else
                                        {
                                            <span class="text-gray-500 italic">Oynandı</span>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }
    </div>
</div>